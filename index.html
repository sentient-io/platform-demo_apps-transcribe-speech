<!DOCTYPE html>
<html lang="en">

    <!-- --------------------------------------------------------------------- -->
    <!-- Remark: for all <a> tags, use target="_top"                           -->
    <!-- to avoid open new window inside iframe                                -->
    <!-- to allow <iframe>, add attribute :  allow="microphone;"               -->
    <!-- --------------------------------------------------------------------- -->

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Transcribe Speech </title>

        <!-- Fav Icon -->
        <link rel="icon" type="image/svg" href="img/Sentient-io_fav.svg" />

        <!-- CSS -->
        <link rel="stylesheet" href="css/style.css">

        <!-- Google Material Icons -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>

    <body>
        <main>
            <header>
                <div class="description">
                    <h1>Transcribe Speech <sup class="tag">DEMO</sup> </h1>
                    <p>
                        This demo app transcribes spoken English and Mandarin into text. 
						User can further select the specific transcription model for English based the use-case or accent of the input best suited for.
                    </p>
                </div>
                <aside>
                    <a href="https://platform.sentient.io/demoapps_detail/transcribe_speech" target="_top" class="more-info">More Info</a>
                    <a href="https://github.com/sentient-io/platform-demo_apps-transcribe-speech.git" target="_top" class="demo-app-code">Demo App Code</a>
                </aside>
            </header>

            <section>
                <!-- ----------------------- -->
                <!-- Main Demo App Functions -->
                <!-- ----------------------- -->
                <div id="langSelectorSection">
                    <p>Please select language:</p>
                    <form onsubmit="return false" id='languageSelector'>
                        <input type="radio" id="english" name="language" value="english" checked>
                        <label for="english" class="mr-sm">English</label>
                        <input type="radio" id="mandarin" name="language" value="mandarin">
                        <label for="mandarin">Mandarin</label>
                    </form>
                </div>

                <div id="modelSelectorSection">
                    <!-- <form onsubmit="return false"> -->
                    <label for="model">Please select English ASR model:</label>
                    <select name="model" id="modelSelector">
                        <option value="generic" selected>Generic</option>
                        <option value="prepared_speech">Prepared Speech (SG)</option>
                        <option value="telephony">Telephony(SG)</option>
                    </select>
                    <!-- </form> -->
                    <small id="modelDescription">
                        Large nnet3-chain factorized TDNN model, trained on ~1200 hours of
                        audio. Generic English, 16KHz
                    </small>
                </div>

                <div id="startRecordingSection">
                    <p>To start, click the button below and
                        <strong> allow browser to use your microphone</strong>
                        .
                    </p>
                    <button class="green" onclick="userAction.startTranscribe()">
                        <span class="material-icons mr-sm">
                            record_voice_over
                        </span>
                        Start
                    </button>
                </div>

                <div id="transResultSection" style="display: none;">
                    <!-- 
                        Each items inside transResultSection will have below html tags:
                        <div> 
                        <span>1.</span>
                        <p>some transcription results</p>
                        </div>
                    -->
                    <!-- 
                        Loader icon before transcription result been rendered
                        <div class="loader"></div>    
                    -->
                </div>

                <div id="voiceRecorderSection" style="display: none;">
                    <button id="voiceRecorderButton" class="green round" onmousedown="userAction.recordAudio()"
                      ontouchstart="userAction.recordAudio()" onmouseup="userAction.transAudio()"
                      ontouchend="userAction.transAudio()">
                        <span class="material-icons">
                            settings_voice
                        </span>
                    </button>
                    <p>Hold to talk, release to transcribe.</p>

                    <button id="restartButton" class="button-restart"
                      onclick="window.location.href=window.location.href">
                        <span class="material-icons">
                            refresh
                        </span>Restart
                    </button>
                </div>

                <!-- -END- Main Demo App Functions -->
                <!-- ----------------------------- -->
            </section>

        </main>


        <footer>
            <section>
                <address>
                    <p>
                        Designed and built by
                        <a href="https://www.sentient.io/" target="_top">Sentient.io</a>
                        with the help of our contributors.
                    </p>
                    <p>
                        App version: 3.0.0 | Source code for app available
                        <a href="https://github.com/sentient-io/platform-demo_apps-transcribe-speech.git" target="_top">here</a>
                        .
                    </p>
                </address>

                <a href="https://www.sentient.io/" target="_top">
                    <img src="img/sentient-logo.png" alt="Sentient.io logo" class="logo">
                </a>
            </section>

        </footer>
    </body>

    <script src="app.js"></script>
    <script src="js/recorder.js"></script>
    <script src="js/asr.js"></script>
    <script src="js/main.js"></script>

    <script>
        /** Disable long press, calling out menu event on mobile */
        document.getElementById( 'voiceRecorderButton' ).oncontextmenu = function () { return false; }
    </script>


</html>